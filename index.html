<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A privacy-focused tool to scan websites for tracking technologies like cookies, localStorage, and third-party scripts.">
    <title>TrackPeek - What Data Are They Tracking? 🕵️</title>
    <link rel="stylesheet" href="style.css">
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🕵️</text></svg>">
</head>
<body>
    <div class="container">
        <header>
            <h1>What Data Are They Tracking? 🕵️</h1>
            <p class="tagline">A simple, privacy-focused tool to reveal tracking technologies on any website</p>
        </header>

        <main>
            <div class="bookmarklet-container">
                <a class="bookmarklet" href="javascript:(function(){if(document.getElementById('trackpeek-popup'))return;var s=document.createElement('script');s.src='https://'+window.location.hostname+'/scanner.js';s.onerror=function(){var r=new XMLHttpRequest();r.open('GET','https://raw.githubusercontent.com/YOUR-USERNAME/trackpeek/main/scanner.js',true);r.onload=function(){if(this.status>=200&&this.status<400){var sc=document.createElement('script');sc.textContent=this.responseText;document.body.appendChild(sc);}};r.send();};document.body.appendChild(s);})();">
                    📊 Scan This Site
                </a>
                <span class="drag-instruction">← Drag this button to your bookmarks bar</span>
            </div>

            <section class="instructions">
                <h2>How to Use</h2>
                <ol>
                    <li>Drag the <strong>"📊 Scan This Site"</strong> button above to your bookmarks bar.</li>
                    <li>Visit any website you want to analyze.</li>
                    <li>Click the bookmarklet in your bookmarks bar.</li>
                    <li>A popup will appear showing all tracking technologies in use.</li>
                </ol>
            </section>

            <section class="features">
                <div class="feature">
                    <div class="feature-icon">🍪</div>
                    <h3>Cookie Detection</h3>
                    <p>Identifies all cookies set by the website, which can be used to track your browsing behavior and preferences.</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">📦</div>
                    <h3>Storage Analysis</h3>
                    <p>Reveals data stored in localStorage and sessionStorage, which websites use to persist information about you.</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">🌍</div>
                    <h3>Third-Party Detection</h3>
                    <p>Identifies external scripts from third-party domains that may be collecting data about your browsing activity.</p>
                </div>
            </section>

            <div class="privacy-notice">
                <p><strong>Privacy Commitment:</strong> This tool operates entirely in your browser. No data is sent to our servers or any third parties. Your browsing data stays private and secure.</p>
            </div>
        </main>

        <footer>
            <p>TrackPeek is a privacy-focused tool created to promote transparency in web tracking.</p>
            <p> 2025 TrackPeek | <a href="https://github.com/YOUR-USERNAME/trackpeek">GitHub</a></p>
        </footer>
    </div>

    <!-- Inline bookmarklet generator script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Create the bookmarklet code
            const scannerCode = `(function(){
                // Check if popup already exists
                if(document.getElementById('trackpeek-popup')) return;
                
                // Try to load from same origin first
                var s = document.createElement('script');
                s.src = '${window.location.protocol}//${window.location.host}/scanner.js';
                
                // Fallback to GitHub if same-origin fails
                s.onerror = function() {
                    var r = new XMLHttpRequest();
                    r.open('GET', 'https://raw.githubusercontent.com/YOUR-USERNAME/trackpeek/main/scanner.js', true);
                    r.onload = function() {
                        if (this.status >= 200 && this.status < 400) {
                            var sc = document.createElement('script');
                            sc.textContent = this.responseText;
                            document.body.appendChild(sc);
                        }
                    };
                    r.send();
                };
                
                document.body.appendChild(s);
            })()`;
            
            // Encode the bookmarklet
            const bookmarkletCode = `javascript:${encodeURIComponent(scannerCode)}`;
            
            // Update the bookmarklet href
            document.querySelector('.bookmarklet').href = bookmarkletCode;
        });
    </script>
</body>
</html>